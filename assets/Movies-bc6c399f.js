import{p as m,r as n,C as v,j as e}from"./index-6ac05d95.js";import{m as f}from"./motion-38acdc60.js";import{H as R}from"./Header-e4b6b7c4.js";function a({title:i,carouselRef:t,carouselWidth:o,renderMovies:p}){return e.jsxs("section",{className:"home categoriesSection",children:[e.jsx("h2",{className:"section_title",children:i}),e.jsx(f.div,{ref:t,className:"carousel",whileTap:{cursor:"grabbing"},children:e.jsx(f.div,{className:"carousel_content",drag:"x",dragConstraints:{right:0,left:-o},initial:{x:-100},animate:{x:0},children:p()})})]})}a.propTypes={title:m.PropTypes.string.isRequired,carouselRef:m.PropTypes.object.isRequired,carouselWidth:m.PropTypes.number.isRequired,renderMovies:m.PropTypes.func.isRequired};function y(){const{allMovies:i}=n.useContext(v),t=n.useRef({lastSeens:n.useRef(null),comedy:n.useRef(null),drama:n.useRef(null),suspense:n.useRef(null),terror:n.useRef(null),animation:n.useRef(null)}),[o,p]=n.useState({lastSeens:0,comedy:0,drama:0,suspense:0,terror:0,animation:0}),x=c=>{var d,h;const s=t.current[c],r=(d=s==null?void 0:s.current)==null?void 0:d.scrollWidth,u=(h=s==null?void 0:s.current)==null?void 0:h.offsetWidth;return r-u};n.useLayoutEffect(()=>{const c=Object.keys(t.current),s={};c.forEach(r=>{s[r]=x(r)}),p(s)},[i]);const l=c=>i?i.filter(r=>r.genres.includes(c)).map(({id:r,name:u,img:d})=>e.jsx(f.div,{className:"item_carousel",children:e.jsx("img",{src:d,alt:`front banner of ${u}`})},r)):null,j=()=>i?i.sort((s,r)=>r.id-s.id).map(({id:s,name:r,img:u})=>e.jsx(f.div,{className:"item_carousel",children:e.jsx("img",{src:u,alt:`front banner of ${r}`})},s)):null;return e.jsxs("main",{className:"home mainContainer",children:[e.jsx(a,{title:"Vistos mais recentes",carouselRef:t.current.lastSeens,carouselWidth:o.lastSeens,renderMovies:()=>j()}),e.jsx(a,{title:"Filmes de comédia",carouselRef:t.current.comedy,carouselWidth:o.comedy,renderMovies:()=>l("comédia")}),e.jsx(a,{title:"Filmes de drama",carouselRef:t.current.drama,carouselWidth:o.drama,renderMovies:()=>l("drama")}),e.jsx(a,{title:"Filmes de suspense",carouselRef:t.current.suspense,carouselWidth:o.suspense,renderMovies:()=>l("suspense")}),e.jsx(a,{title:"Filmes de terror",carouselRef:t.current.terror,carouselWidth:o.terror,renderMovies:()=>l("terror")||l("horror")}),e.jsx(a,{title:"Animações",carouselRef:t.current.animation,carouselWidth:o.animation,renderMovies:()=>l("animação")})]})}function W(){return e.jsx(e.Fragment,{children:e.jsx(y,{})})}function S(){return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx(W,{})]})}export{S as default};
